<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>初歩の初歩</title>
  <style>
    body {
      background: skyblue;
    }
  </style>
</head>
<body>
  <p>こんにちは</p>
  <form>
    <div>
      <p>メールアドレス入力欄</p>
      <input type="email" id="email" size="50">
      <div id="result1"></div>
      <p>確認入力欄</p>
      <input type="email" id="emailConfirm" size="50">
    </div>
  
    <input type="button" value="Check" id="btn"">
  
    <div id="result2"></div>
  </form>
  
  <script>
    let btn = document.getElementById('btn');
    btn.addEventListener('click', clickButton);

    function clickButton () {
      let email = document.getElementById('email').value;
      let emailConfirm = document.getElementById('emailConfirm').value;
      let result1 = document.getElementById('result1');
      let result2 = document.getElementById('result2');
      let pattern = /^[a-zA-Z0-9_.+-]+@([a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]*\.)+[a-zA-Z]{2,}$/;

      if (email == '') {
        result1.textContent = '';
        result2.textContent = 'メールアドレスを入力してください';
      }
      else if (!pattern.test(email)) {
        result1.textContent = '正しいメールアドレスを入力してください';
        if (emailConfirm == '') {
          result2.textContent = '確認入力欄にメールアドレスを入力してください';
        }
      }
      else if (email == emailConfirm) {
        result1.textContent = '';
        result2.textContent = '一致しています';
      }
      else {
        result1.textContent = '';
        result2.textContent = '一致していません';
      }
    }
  </script>

</body>
</html>
